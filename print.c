#include "header.h"

void print_data()
{
	const char *print_str1 = "*ptr)\n{\nif (ptr == NULL)\n{\nprintf(\"\\n\\033[33mNo Record found\\n\\n\\033[0m\");\nreturn;\n}\n ";
	int i;
	FILE *fp = fopen(main_path, "a");
	fprintf(fp, "\n//--------------------------------- Print Data --------------------------------\n");
	//---------------------------------------------------------------------------------------
	fprintf(fp, "%s", "void print_data(");
	fprintf(fp, "%s %s", alias_name, print_str1);
	//---------------------------------------------------------------------------------------

	//---------------------------------------------------------------------------------------
	// print dot line
	fprintf(fp, "\nprintf(\"\\033[33m");
	for (i = 0; i < no_of_members; i++)
		fprintf(fp, "---------------");
	fprintf(fp, "\\033[0m\\n\");\n");
	//---------------------------------------------------------------------------------------

	//---------------------------------------------------------------------------------------
	// print %-15s
	fprintf(fp, "printf(\"");

	for (i = 0; i < no_of_members; i++)
		fprintf(fp, "%s", "%-15s");
	fprintf(fp, "%s", "\\n\"");
	// variable name
	for (i = 0; i < no_of_members; i++)
		fprintf(fp, ",\"%s\"", member[i]);
	fprintf(fp, "%s", " );\n");
	//---------------------------------------------------------------------------------------
	//
	//---------------------------------------------------------------------------------------
	// print dot line
	fprintf(fp, "\nprintf(\"\\033[33m");
	for (i = 0; i < no_of_members; i++)
		fprintf(fp, "---------------");
	fprintf(fp, "\\033[0m\\n\");\n");
	//---------------------------------------------------------------------------------------
	//
	//---------------------------------------------------------------------------------------
	fprintf(fp, "%s", "while (ptr)\n	{\nprintf(\"\\033[33m");
	// forma t_specifiers
	for (i = 0; i < no_of_members; i++)
	{
		if (types_member[i] != 5)
		{
			if (strcmp(format_specifier[types_member[i]], "s") == 0)
				fprintf(fp, "%s%s", "%-15", format_specifier[types_member[i]]);
			else
				fprintf(fp, "%s%s", "%-15", format_specifier[types_member[i]]);
		}
		else
		{
			fprintf(fp, "%%02d/%%02d/%%-9d");
		}
	}
	fprintf(fp, "%s", "\\n\"");
	//---------------------------------------------------------------------------------------
	//
	//---------------------------------------------------------------------------------------
	// variable name
	for (i = 0; i < no_of_members; i++)
	{
		// if (format_specifier[types_member[i]] == 's')
		if (types_member[i] != 5)
			fprintf(fp, "%s%s", ",ptr->", member[i]);
		else
			fprintf(fp, "%s%s%s%s%s%s%s%s%s", ",ptr->", member[i], ".iidate", ",ptr->", member[i], ".iimonth", ",ptr->", member[i], ".iiyear");
	}
	fprintf(fp, "%s", " );\n");
	//---------------------------------------------------------------------------------------
	//
	//---------------------------------------------------------------------------------------
	fprintf(fp, "%s", "ptr = ptr->next;\n");
	fprintf(fp, "%s", "\n}\n");
	//---------------------------------------------------------------------------------------
	//
	//---------------------------------------------------------------------------------------
	// print dot line -- 3
	fprintf(fp, "\nprintf(\"\\033[33m");
	for (i = 0; i < no_of_members; i++)
		fprintf(fp, "---------------");
	fprintf(fp, "\\033[0m\\n\");\n");
	//---------------------------------------------------------------------------------------

	fprintf(fp, "\n}\n");
	fclose(fp);
}

//------------------------------------- reverse print source code ------------------------------------------------

void reverse_print()
{

	const char *print_str = "*ptr)\n{\nif (ptr == NULL)\n{\nprintf(\"\\033[33mNo Record found\\n\\033[0m\");\nreturn;\n}";
	int i;
	FILE *fp = fopen(main_path, "a");
	fprintf(fp, "\n//--------------------------------- Reverse Print -----------------------------\n");
	//---------------------------------------------------------------------------------------
	fprintf(fp, "%s", "void reverse_print(");
	fprintf(fp, "%s %s", alias_name, print_str);
	//---------------------------------------------------------------------------------------
	//
	//---------------------------------------------------------------------------------------
	fprintf(fp, "%s *prev;\nint i,c,j;\nprev=ptr;\n", alias_name);
	fprintf(fp, "c = count_node(ptr);\n");
	//---------------------------------------------------------------------------------------
	//
	//---------------------------------------------------------------------------------------
	// print dot line -- 1
	fprintf(fp, "\nprintf(\"\\033[33m");
	for (i = 0; i < no_of_members; i++)
		fprintf(fp, "---------------");
	fprintf(fp, "\\033[0m\\n\");\n");
	//---------------------------------------------------------------------------------------
	//
	//---------------------------------------------------------------------------------------
	// print %-15s
	fprintf(fp, "printf(\"");
	for (i = 0; i < no_of_members; i++)
		fprintf(fp, "%s", "%-15s");
	fprintf(fp, "%s", "\\n\"");
	//---------------------------------------------------------------------------------------
	//
	//---------------------------------------------------------------------------------------
	// variable name
	for (i = 0; i < no_of_members; i++)
		fprintf(fp, ",\"%s\"", member[i]);
	fprintf(fp, "%s", " );\n");
	//---------------------------------------------------------------------------------------
	//
	//---------------------------------------------------------------------------------------
	// print dot line -- 2
	fprintf(fp, "\nprintf(\"\\033[33m");
	for (i = 0; i < no_of_members; i++)
		fprintf(fp, "---------------");
	fprintf(fp, "\\033[0m\\n\");\n");
	//---------------------------------------------------------------------------------------
	//
	//---------------------------------------------------------------------------------------
	fprintf(fp, "for (i=0;i<c;i++)\n{\nprev=ptr;\nfor (j = 0; j < c - i - 1; j++)\nprev = prev->next;\n");
	fprintf(fp, "printf(\"\\033[33m");

	// forma t_specifiers
	for (i = 0; i < no_of_members; i++)
	{
		if (types_member[i] != 5)
		{
			if (strcmp(format_specifier[types_member[i]], "s") == 0)
				fprintf(fp, "%s%s", "%-15", format_specifier[types_member[i]]);
			else
				fprintf(fp, "%s%s", "%-15", format_specifier[types_member[i]]);
		}
		else
		{
			fprintf(fp, "%%02d/%%02d/%%-9d");
		}
	}
	fprintf(fp, "%s", "\\n\"");
	//---------------------------------------------------------------------------------------
	//
	//---------------------------------------------------------------------------------------
	// variable name
	for (i = 0; i < no_of_members; i++)
	{
		// if (format_specifier[types_member[i]] == 's')
		if (types_member[i] != 5)
			fprintf(fp, "%s%s", ",prev->", member[i]);
		else
			fprintf(fp, "%s%s%s%s%s%s%s%s%s", ",prev->", member[i], ".iidate", ",prev->", member[i], ".iimonth", ",prev->", member[i], ".iiyear");
	}
	fprintf(fp, "%s", " );\n");
	fprintf(fp, "%s", "\n}\n");
	//---------------------------------------------------------------------------------------
	//
	//---------------------------------------------------------------------------------------
	// print dot line -- 3
	fprintf(fp, "\nprintf(\"\\033[33m");
	for (i = 0; i < no_of_members; i++)
		fprintf(fp, "---------------");
	fprintf(fp, "\\033[0m\\n\");\n");
	fprintf(fp, "%s", "\n}\n");
	//---------------------------------------------------------------------------------------
	fclose(fp);
}
